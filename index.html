<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XDR | ZONA GAMER & STORE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root {
            --neon-cyan: #00f0ff;
            --neon-magenta: #ff00ff;
            --neon-green: #39ff14;
            --neon-red: #ff003c;
            --neon-purple: #bc13fe;
            --neon-white: #e0ffff; /* Para papelería */
            --bg-black: #050505;
            --panel-bg: rgba(10, 10, 10, 0.9);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-black);
            color: #fff;
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* --- BACKGROUND EFFECTS --- */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 1000; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }

        /* --- NAVIGATION --- */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 2000;
            background: rgba(0,0,0,0.8); border-bottom: 2px solid var(--neon-cyan);
            padding: 10px 20px; display: flex; justify-content: space-between; align-items: center;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-family: 'Orbitron'; font-weight: 900; font-size: 1.8rem;
            color: var(--neon-cyan); text-shadow: 0 0 10px var(--neon-cyan);
            cursor: pointer;
        }

        .nav-links { display: flex; gap: 15px; }

        .glitch-btn {
            background: none; border: none; color: #fff; font-family: 'Orbitron';
            font-size: 0.8rem; cursor: pointer; position: relative; padding: 10px;
            text-transform: uppercase; transition: 0.2s;
        }

        .glitch-btn:hover {
            color: var(--neon-magenta);
            animation: glitch 0.3s infinite;
            text-shadow: 2px 0 var(--neon-cyan), -2px 0 var(--neon-red);
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        /* --- SECTIONS --- */
        section {
            min-height: 100vh; padding: 100px 20px 40px;
            display: none; flex-direction: column; align-items: center;
        }

        section.active { display: flex; animation: fadeIn 0.5s ease; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .container { max-width: 1200px; width: 100%; }

        .hero-title {
            font-family: 'Orbitron'; font-size: 3.5rem; text-align: center;
            margin-bottom: 20px; color: var(--neon-cyan);
            text-shadow: 0 0 20px rgba(0, 240, 255, 0.5);
            line-height: 1.2;
        }
        
        .brand-huge {
            font-family: 'Orbitron'; 
            font-size: 6rem; 
            font-weight: 900; 
            color: var(--neon-magenta); 
            text-shadow: 0 0 30px var(--neon-magenta), 0 0 60px var(--neon-purple);
            margin-bottom: 20px;
            animation: pulse 3s infinite alternate;
        }
        
        @keyframes pulse {
            from { text-shadow: 0 0 20px var(--neon-magenta); }
            to { text-shadow: 0 0 40px var(--neon-magenta), 0 0 80px var(--neon-purple); }
        }

        /* --- GRID CARDS --- */
        .hardware-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px; margin-top: 30px;
        }

        .card {
            background: #111; border: 1px solid #333; padding: 25px;
            position: relative; overflow: hidden; transition: 0.3s;
            border-bottom: 4px solid var(--neon-cyan);
        }

        .card:hover {
            transform: translateY(-10px);
            border-color: var(--neon-magenta);
            box-shadow: 0 10px 30px rgba(255, 0, 255, 0.2);
        }

        .card i { font-size: 3rem; margin-bottom: 20px; color: var(--neon-cyan); }
        .card h3 { font-family: 'Orbitron'; margin-bottom: 15px; color: #fff; }
        .card ul { list-style: none; color: #aaa; font-size: 0.9rem; }
        .card ul li { margin-bottom: 8px; border-left: 2px solid var(--neon-magenta); padding-left: 10px; }

        /* --- STATUS BAR (SOPHIA) --- */
        .sophia-bar {
            position: fixed; bottom: 0; width: 100%; padding: 10px 20px;
            background: #000; border-top: 1px solid var(--neon-green);
            display: flex; justify-content: space-between; font-size: 0.8rem;
            color: var(--neon-green); font-family: 'Orbitron'; z-index: 2000;
        }

        /* --- ANIME SHOP --- */
        .anime-banner {
            width: 100%; height: 300px; background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1578632292335-df3abbb0d586?q=80&w=1200') center/cover;
            display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--neon-purple); margin-bottom: 40px;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 850px) {
            .nav-links { display: none; } /* En una app real usaríamos un menú hamburguesa */
            .hero-title { font-size: 2rem; }
            .brand-huge { font-size: 4rem; }
        }
    </style>
</head>
<body>

    <div class="scanlines"></div>

    <nav>
        <div class="logo" onclick="showSection('home')">XDR</div>
        <div class="nav-links">
            <button class="glitch-btn" onclick="showSection('gamer')">Zona Gamer</button>
            <button class="glitch-btn" onclick="window.location.href='cafeteria.html'">Cafetería</button>
            <button class="glitch-btn" onclick="showSection('papeleria')">Papelería</button>
            <button class="glitch-btn" onclick="showSection('anime')">Anime & Manga</button>
            <button class="glitch-btn" onclick="showSection('eventos')">Eventos</button>
            <button class="glitch-btn" onclick="showSection('info')">Ubicación</button>
        </div>
    </nav>

    <!-- HOME SECTION -->
    <section id="home" class="active">
        <div class="container" style="text-align: center; justify-content: center; display: flex; flex-direction: column; min-height: 80vh;">
            <h1 class="hero-title">BIENVENIDO A LA ZONA GAMER</h1>
            <div class="brand-huge">XDR</div>
            <p style="font-size: 1.5rem; letter-spacing: 3px; color: var(--neon-cyan);">LA EXPERIENCIA GAMING DEFINITIVA</p>
            <div style="margin-top: 40px;">
                <button class="glitch-btn" style="font-size: 1.2rem; border: 1px solid var(--neon-cyan); padding: 15px 30px;" onclick="showSection('gamer')">ENTRAR A LA ZONA</button>
            </div>
        </div>
    </section>

    <!-- ZONA GAMER -->
    <section id="gamer">
        <div class="container">
            <h2 class="hero-title">ESTACIONES DISPONIBLES EN NUESTRA ZONA</h2>
            <div class="hardware-grid">
                <!-- PC -->
                <div class="card">
                    <i class="fa-solid fa-desktop"></i>
                    <h3>PC GAMER</h3>
                    <ul>
                        <li>Monitor MSI Pro 27" Curvo</li>
                        <li>Procesadores Alta Gama</li>
                        <li>Teclado y Mouse Mecánico</li>
                        <li>Sillas Gamer Ergonómicas</li>
                    </ul>
                </div>

                <!-- PS5 -->
                <div class="card" style="border-color: #0043ff;">
                    <i class="fa-brands fa-playstation" style="color:#0043ff"></i>
                    <h3>PLAYSTATION 5</h3>
                    <ul>
                        <li>Gráficos 4K HDR</li>
                        <li>Controles DualSense</li>
                        <li>Juegos de Última Generación</li>
                        <li>Pantallas de Alta Definición</li>
                        <li>Sillas Gamer Ergonómicas</li>
                    </ul>
                </div>

                <!-- PS4 -->
                <div class="card" style="border-color: #0030b0;">
                    <i class="fa-brands fa-playstation" style="color:#0030b0"></i>
                    <h3>PLAYSTATION 4</h3>
                    <ul>
                        <li>Gran Catálogo de Juegos</li>
                        <li>Controles DualShock 4</li>
                        <li>FIFA / Call of Duty</li>
                        <li>Ideal para Partidas Casuales</li>
                        <li>Sillas Gamer Ergonómicas</li>
                    </ul>
                </div>

                <!-- XBOX -->
                <div class="card" style="border-color: #107c10;">
                    <i class="fa-brands fa-xbox" style="color:#107c10"></i>
                    <h3>XBOX</h3>
                    <ul>
                        <li>Amplia Variedad de Títulos</li>
                        <li>Controles Ergonómicos</li>
                        <li>Multijugador Fluido</li>
                        <li>Pantallas de Alta Calidad</li>
                        <li>Sillas Gamer Ergonómicas</li>
                    </ul>
                </div>

                <!-- SWITCH -->
                <div class="card" style="border-color: #e60012;">
                    <i class="fa-solid fa-gamepad" style="color:#e60012"></i>
                    <h3>NINTENDO SWITCH</h3>
                    <ul>
                        <li>Torneos Smash Bros</li>
                        <li>Mario Kart 8 Deluxe</li>
                        <li>Hasta 4 Jugadores</li>
                        <li>Diversión en Grupo</li>
                        <li>Sillas Gamer Ergonómicas</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- PAPELERÍA (NUEVA SECCIÓN) -->
    <section id="papeleria">
        <div class="container">
            <h2 class="hero-title" style="color: var(--neon-white); text-shadow: 0 0 20px var(--neon-cyan);">CENTRO DE PAPELERÍA</h2>
            <div class="hardware-grid">
                <div class="card" style="border-color: var(--neon-white);">
                    <i class="fa-solid fa-print" style="color: var(--neon-white);"></i>
                    <h3>IMPRESIONES & COPIAS</h3>
                    <ul>
                        <li>Impresión Láser B/N y Color</li>
                        <li>Papel Fotográfico Brillo/Mate</li>
                        <li>Fotocopias de Cédula y Docs</li>
                        <li>Escaneo Digital a Correo</li>
                    </ul>
                </div>
                <div class="card" style="border-color: var(--neon-white);">
                    <i class="fa-solid fa-pen-ruler" style="color: var(--neon-white);"></i>
                    <h3>ÚTILES & MATERIALES</h3>
                    <ul>
                        <li>Cuadernos, Lápices, Bolígrafos</li>
                        <li>Carpetas y Sobres</li>
                        <li>Material Escolar y de Oficina</li>
                        <li>Artículos de Manualidades</li>
                    </ul>
                </div>
                <div class="card" style="border-color: var(--neon-white);">
                    <i class="fa-solid fa-file-invoice" style="color: var(--neon-white);"></i>
                    <h3>TRÁMITES ONLINE</h3>
                    <ul>
                        <li>Gestión de Citas (SAIME, INTT)</li>
                        <li>Redacción de Documentos</li>
                        <li>Pago de Servicios</li>
                        <li>Investigaciones Escolares</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- ANIME & MANGA -->
    <section id="anime">
        <div class="container">
            <div class="anime-banner">
                <h2 style="font-family:'Orbitron'; font-size: 3rem; text-shadow: 0 0 20px #000;">XDR ANIME STORE</h2>
            </div>
            <div class="hardware-grid">
                <div class="card" style="border-color: var(--neon-purple);">
                    <h3>FIGURAS COLECCIONABLES</h3>
                    <p>Banpresto, Good Smile, y más. Las mejores estatuas de tus personajes favoritos.</p>
                </div>
                <div class="card" style="border-color: var(--neon-purple);">
                    <h3>MANGA & NOVELAS</h3>
                    <p>Últimos tomos de Panini e Ivrea. Shonen, Seinen y clásicos.</p>
                </div>
                <div class="card" style="border-color: var(--neon-purple);">
                    <h3>APPAREL & ACCESORIOS</h3>
                    <p>Franelas, hoodies y llaveros con diseños exclusivos de XDR.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- EVENTOS -->
    <section id="eventos">
        <div class="container" style="max-width: 600px; text-align: center;">
            <h2 class="hero-title">CELEBRA TU EVENTO</h2>
            <div class="card" style="border-color: var(--neon-green); text-align: left;">
                <p style="margin-bottom: 20px;">Reserva el área VIP para cumpleaños, torneos privados o reuniones. Sophia gestionará tu disponibilidad.</p>
                <input type="text" placeholder="NOMBRE DEL EVENTO" style="width:100%; padding:12px; background:#000; border:1px solid #333; color:white; margin-bottom:10px;">
                <input type="date" style="width:100%; padding:12px; background:#000; border:1px solid #333; color:white; margin-bottom:10px;">
                <button class="glitch-btn" style="width: 100%; background: var(--neon-green); color: #000; font-weight: bold;">SOLICITAR RESERVA</button>
            </div>
        </div>
    </section>

    <!-- INFO & UBICACIÓN -->
    <section id="info">
        <div class="container">
            <h2 class="hero-title">VISÍTANOS</h2>
            <div class="hardware-grid">
                <div class="card">
                    <h3>UBICACIÓN</h3>
                    <p>Urbanizacion 10 de Marzo, Calle Sucre, a 20 metros de la entrada principal</p>
                </div>
                <div class="card">
                    <h3>REDES SOCIALES</h3>
                    <div style="display:flex; gap:20px; font-size: 2rem; margin-top: 15px;">
                        <i class="fa-brands fa-instagram"></i>
                        <i class="fa-brands fa-tiktok"></i>
                        <i class="fa-brands fa-facebook"></i>
                    <h3>CONTACTO</h3>
                    <div style="display:flex; gap:20px; font-size: 2rem; margin-top: 15px;">
                        <i class="fa-brands fa-whatsapp"></i>
                        <i class="Numero 04123914757"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="sophia-bar">
        <div>SOPHIA_OS: <span id="sophia-status">INICIANDO...</span></div>
        <div id="live-time">00:00:00</div>
    </div>

    <!-- SCRIPT PRINCIPAL -->
    <script type="module">
        // Importamos versión 10.7.1 para asegurar compatibilidad con cafeteria.html y estabilidad
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // --- SISTEMA DE NAVEGACIÓN (SEGURO) ---
        // Definimos logActivity como función vacía inicialmente para prevenir errores si se hace click muy rápido
        window.logActivity = () => {};

        window.showSection = (sectionId) => {
            // Ocultar todas las secciones
            document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
            
            // Mostrar la seleccionada
            const target = document.getElementById(sectionId);
            if(target) target.classList.add('active');
            
            window.scrollTo(0,0);
            
            // Intentar notificar a Sophia (sin romper si falla)
            try { window.logActivity(`Navegó a: ${sectionId}`); } catch(e) {}
        };

        // --- LÓGICA DE FIREBASE Y SOPHIA ---
        const initSophiaMonitoring = async () => {
            let app, auth, db, user;
            let appId = 'default-app-id';

            try {
                // INTENTO DE OBTENER CONFIGURACIÓN
                let configStr;
                if (typeof __firebase_config !== 'undefined') {
                    configStr = __firebase_config;
                    if(typeof __app_id !== 'undefined') appId = __app_id;
                } else {
                    // SI NO HAY CONFIG (GITHUB PAGES SIN ENV), LANZAMOS ERROR PARA IR AL MODO OFFLINE
                    throw new Error("Configuración no encontrada");
                }

                const firebaseConfig = JSON.parse(configStr);
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                // Autenticación
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
                
                onAuthStateChanged(auth, (u) => {
                    if (u) {
                        user = u;
                        console.log("Sophia OS: Conectado como", user.uid);
                        registrarVisita(db, appId, user);
                    }
                });

                // Función real para log de actividad (Sobrescribe la vacía)
                window.logActivity = async (msg) => {
                    if (!user || !db) return;
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'actividad_tiempo_real'), {
                        uid: user.uid,
                        mensaje: msg,
                        timestamp: serverTimestamp()
                    });
                };

            } catch (error) {
                console.warn("Sophia OS Offline: No se detectó configuración de Firebase.", error);
                document.getElementById('sophia-status').innerText = "MODO_OFFLINE";
                document.getElementById('sophia-status').style.color = "#ff003c"; // Rojo alerta
                
                // Mantenemos logActivity como vacía para que la navegación siga funcionando
            }
        };

        const registrarVisita = async (db, appId, user) => {
            if (!user) return;
            await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'visitas'), {
                uid: user.uid,
                hora: new Date().getHours(),
                timestamp: serverTimestamp(),
                plataforma: 'WEB',
                accion: 'ENTRADA_PAGINA_PRINCIPAL'
            });
            document.getElementById('sophia-status').innerText = "MONITOREANDO_VIVO";
        };

        // Reloj siempre funciona
        setInterval(() => {
            const now = new Date();
            document.getElementById('live-time').innerText = now.toLocaleTimeString();
        }, 1000);

        // Iniciar
        window.onload = initSophiaMonitoring;

    </script>
</body>
</html>

